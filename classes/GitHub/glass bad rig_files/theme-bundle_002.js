webpackJsonp([18],{443:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function o(i){t("[data-brand-infinite-scroll]").each(function(e,n){new g(t(n),{template:"brand/product-listing",config:{brand:{products:{limit:parseInt(i.themeSettings.brandpage_products_per_page,10)}}}},i)})}function s(i){t("[data-category-infinite-scroll]").each(function(e,n){new g(t(n),{config:{category:{products:{limit:parseInt(i.themeSettings.categorypage_products_per_page,10)}}}},i)})}function a(i){t("[data-search-infinite-scroll]").each(function(e,n){new g(t(n),{template:"search/product-listing",config:{product_results:{limit:parseInt(i.themeSettings.searchpage_products_per_page,10)}}},i)})}i.initBrandPage=o,i.initCategoryPage=s,i.initSearchPage=a;var r=e(164),c=e.n(r),p=e(72),l=e.n(p),d=e(13),g=function(){function i(t,e,o){n(this,i);var s={containerSelector:".productGrid",paginationSelector:".pagination",nextLinkSelector:".pagination-item--next .pagination-link",loadingClass:"is-loading",threshold:100,appendSelector:".product",template:"category/product-listing",config:{}};this.options=l()({},s,e),this.$scope=t,this.context=o,this.isRequesting=!1,this.onScroll=this.onScroll.bind(this),this.bindEvents()}return i.prototype.bindEvents=function(){t(window).on("scroll",c()(this.onScroll,200))},i.prototype.onScroll=function(){if(!this.isRequesting){var i=t(this.options.paginationSelector,this.$scope),e=t(this.options.nextLinkSelector,i);if(0===e.length)return t(".loadmore i").remove(),void t(".loadmore span").text("No more products").show();var n=e.offset().top-this.options.threshold,o=t(window).scrollTop(),s=o+t(window).height();if(n>=o&&n<=s){var a=e.attr("href").replace(/&?limit=[0-9]+/,"")+"&limit="+this.context.themeSettings.categorypage_products_per_page;t(".loadmore span").text("Loading more products").show(),this.request(a)}}},i.prototype.request=function(i){var e=this,n=t(this.options.containerSelector,this.$scope),o=t(this.options.paginationSelector,this.$scope);this.isRequesting=!0,o.addClass(this.options.loadingClass),n.addClass(this.options.loadingClass),d.a.getPage(i,{template:this.options.template,config:this.options.config},function(i,s){if(e.isRequesting=!1,o.removeClass(e.options.loadingClass),n.removeClass(e.options.loadingClass),i)return i;var a=t(s),r=t(e.options.appendSelector,a);r.length>0&&n.append(r);var c=a.find(".pagination-list").html();o.empty().append(c)})},i}();i.default=g}.call(i,e(1))}});